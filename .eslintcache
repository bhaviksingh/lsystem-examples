[{"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/index.tsx":"1","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSPreview.tsx":"2","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/EditorPage.tsx":"3","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/utils.ts":"4","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/ExamplesPage.tsx":"5","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/worker/index.ts":"6","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/worker/worker.ts":"7","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSTextViewer.tsx":"8","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/index.ts":"9","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/Examples/Lilac.tsx":"10","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/Examples/TextGarden.tsx":"11","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/Examples/Webpage.tsx":"12","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/index.tsx":"13","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/LSImageViewer3D.tsx":"14","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/LSImageViewer2D.tsx":"15","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/drawChar.ts":"16","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/LSImageViewerBasic.tsx":"17","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditAndView.tsx":"18","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSEditor.tsx":"19","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSStatusConsole.tsx":"20","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSCodeEditor.tsx":"21","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSGFXEditor.tsx":"22","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/FavoritePage.tsx":"23","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/codeSyntax.tsx":"24","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/PageLayout.tsx":"25","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/data/examples.ts":"26","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSViewerController.tsx":"27","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/ui/RangeSlider.tsx":"28"},{"size":1176,"mtime":1631910910493,"results":"29","hashOfConfig":"30"},{"size":4459,"mtime":1634618501034,"results":"31","hashOfConfig":"30"},{"size":1240,"mtime":1634617383208,"results":"32","hashOfConfig":"30"},{"size":3414,"mtime":1633723979785,"results":"33","hashOfConfig":"30"},{"size":1313,"mtime":1633458144262,"results":"34","hashOfConfig":"30"},{"size":728,"mtime":1633116196723,"results":"35","hashOfConfig":"30"},{"size":654,"mtime":1627852181355,"results":"36","hashOfConfig":"30"},{"size":325,"mtime":1633391792858,"results":"37","hashOfConfig":"30"},{"size":265,"mtime":1633390898779,"results":"38","hashOfConfig":"30"},{"size":3146,"mtime":1629489276811,"results":"39","hashOfConfig":"30"},{"size":2258,"mtime":1629489086180,"results":"40","hashOfConfig":"30"},{"size":2963,"mtime":1629489084742,"results":"41","hashOfConfig":"30"},{"size":141,"mtime":1633390837983,"results":"42","hashOfConfig":"30"},{"size":2522,"mtime":1634618902280,"results":"43","hashOfConfig":"30"},{"size":1018,"mtime":1632800684164,"results":"44","hashOfConfig":"30"},{"size":2973,"mtime":1631045417779,"results":"45","hashOfConfig":"30"},{"size":5224,"mtime":1634616801368,"results":"46","hashOfConfig":"30"},{"size":2015,"mtime":1634617323704,"results":"47","hashOfConfig":"30"},{"size":8758,"mtime":1634619239702,"results":"48","hashOfConfig":"30"},{"size":3141,"mtime":1634615242090,"results":"49","hashOfConfig":"30"},{"size":1397,"mtime":1634162730421,"results":"50","hashOfConfig":"30"},{"size":2295,"mtime":1634163800259,"results":"51","hashOfConfig":"30"},{"size":811,"mtime":1633459195625,"results":"52","hashOfConfig":"30"},{"size":3066,"mtime":1634164757317,"results":"53","hashOfConfig":"30"},{"size":783,"mtime":1631912008855,"results":"54","hashOfConfig":"30"},{"size":2605,"mtime":1632439789481,"results":"55","hashOfConfig":"30"},{"size":8170,"mtime":1634619346349,"results":"56","hashOfConfig":"30"},{"size":664,"mtime":1634162436783,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"3po7ti",{"filePath":"61","messages":"62","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"60"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"60"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"60"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78","usedDeprecatedRules":"60"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"60"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"60"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"60"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"60"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"99","usedDeprecatedRules":"60"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"60"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"60"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"60"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"60"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/index.tsx",[],["128","129"],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSPreview.tsx",["130","131"],"import LSystem from \"@bvk/lsystem\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {  codeToProps, encodeCodeParams, encodePropsParams, GFXProps, LSProps, propsToCode } from \"./utils\";\nimport VizSensor from \"react-visibility-sensor\";\nimport { createLSInWorker } from \"./worker\";\nimport { LSViewer } from \"./LSViewer\";\nimport { syntaxHighlight } from \"./LSEditor/codeSyntax\";\n\ninterface LSPreviewProps {\n  code: string;\n  gfxProps?: GFXProps;\n  name?: string;\n}\ninterface LSPreviewState {\n  currentLS: LSystem | undefined;\n  iterations: number;\n  hasBeenVisible: boolean;\n}\n\n/* LSViewer.ts\n * This class is a simple class to view an LSystem in one or more renderers.\n * The LSystem cannot be customizer, *but* it can be iterated on. The iterating and updating is all handled here.\n * TODO: We could simplify this as a sub-case of the LSEditor component, but we leave it as is for clarity for now :)\n * */\nexport class LSPreview extends React.Component<LSPreviewProps, LSPreviewState> {\n  canvasContainer: HTMLDivElement | null = null;\n  state: LSPreviewState = {\n    currentLS: undefined,\n    iterations: this.props.gfxProps && this.props.gfxProps.iterations ? this.props.gfxProps.iterations : 1,\n    hasBeenVisible: false,\n  };\n\n  updateIterations = (e: React.ChangeEvent<HTMLInputElement>) => {\n    let newNum = parseFloat(e.target.value);\n    if (this.state.currentLS) {\n      this.state.currentLS.setIterations(newNum);\n      //TODO: Move to worker :)\n      this.setState({ currentLS: this.state.currentLS, iterations: newNum });\n    } else {\n      this.setState({ iterations: newNum });\n    }\n  };\n  createLS = (isVisible: boolean) => {\n    if (isVisible && this.state.currentLS === undefined) {\n      // console.log(\"🐸🐸🐸🐸 Starting LS creating...\");\n      const lsProps: LSProps = {...codeToProps(this.props.code), iterations: this.state.iterations};\n      createLSInWorker(lsProps).then((ls) => {\n        // console.log(\"🐸🐸🐸🐸 WORKER FINISHED, NOW WE'RE SETTING STATE\", ls);\n        this.setState({ currentLS: ls, hasBeenVisible: true });\n        // console.log(\"🐸🐸🐸🐸 LS Creating stopped\", ls);\n      }).catch((e) => {\n        this.setState({currentLS: undefined, hasBeenVisible: true})\n      });\n    }\n  };\n  getRenderers = () => {\n    if (this.state.currentLS === undefined || this.state.hasBeenVisible === false) {\n      return \"NO LS YET\";\n    }\n    let renderers = [];\n    let sizeProps = {}\n    if (this.canvasContainer) {\n      sizeProps = {width: this.canvasContainer.clientWidth, height: this.canvasContainer.clientWidth}\n    }\n    const gfx = {...this.props.gfxProps, ...sizeProps};\n    renderers.push(<LSViewer lSystem={this.state.currentLS} gfxProps={gfx} key=\"image-viewer-all\" changeIterationsControls />);\n    return renderers;\n  };\n  render = () => {\n    return (\n      <VizSensor onChange={this.createLS} partialVisibility={true}>\n        <div\n          className={`side-by-side  hide-overflow border ${\n            this.state.hasBeenVisible === false ? \"\" : \"become-visible\"\n          }`}\n        >\n          <div className=\"stack no-gap border-right\">\n            <div className=\"horizontal-stack border-bottom  guide-surface toolbar\">\n              <span className=\"clickable \">\n                <Link to={`/edit${encodeCodeParams(this.props.code, this.props.gfxProps)}`}>edit</Link>\n              </span>\n            </div>\n            <div className=\"guide-surface-light-tone flex-1 padded:vertical padded:right padded:left:smallest\">\n              <pre className=\" wrap-text stack smallest code-text code-line-offset\">\n                {syntaxHighlight(this.props.code)}\n              </pre>\n            </div>\n          </div>\n          <div ref={(divElement) => (this.canvasContainer = divElement)}>{this.getRenderers()}</div>\n        </div>\n      </VizSensor>\n    );\n  };\n}\n","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/EditorPage.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/utils.ts",["132","133"],"\nimport qs from \"qs\";\nimport { lineIsComment, splitLines } from \"./LSEditor/codeSyntax\";\n\n\n\nexport const defaultLSData = {\n  axiom: \"A\",\n  productionText: [\"A:FA\"],\n  iterations: 10\n}\n\nexport type P5CanvasType = \"webgl\" | \"p2d\"\nexport type renderTypes = \"auto\"  | \"2d\" | \"3d\" | \"text\" | \"pixel\";\n\nexport interface CompleteLSExample {\n  lsProps: LSProps\n  gfxProps?: GFXProps\n  name?: string\n}\n\nexport interface LSError {\n  lineNum: \"global\" | number,\n  error: Error\n}\nexport interface LSStatus {\n  state : \"compiling\" | \"compiled\" | \"error\" | \"ready\" | \"redrawing\"\n  errors?: LSError[],\n  message?: string\n}\nexport interface LSProps {\n  axiom: string\n  productions: string[]\n  iterations: number\n}\n\nexport interface GFXPropsComplete {\n  renderType: renderTypes[]\n  length: number\n  angle: number\n  center: number[]\n  width: number \n  height: number\n  strokeWeight: number\n  backgroundColor: string\n  animationWaitTime: number,\n  iterations: number\n}\n\nconst defaultGFXProps: GFXPropsComplete = {\n  renderType: [\"auto\"],\n  length: 10,\n  angle: 30,\n  center: [0,0],\n  width: 600,\n  height: 600,\n  strokeWeight: 1,\n  backgroundColor:\"#eee\",\n  animationWaitTime: 500,\n  iterations: 3\n}\n\nexport const completeGfxProps = (gfxProps: GFXProps | undefined) : GFXPropsComplete => {\n  if ( gfxProps === undefined) return defaultGFXProps\n  return {...defaultGFXProps, ...gfxProps};\n}\n\nexport type GFXProps = Partial<GFXPropsComplete>\n\n\nexport function flattenLSProps(ls: LSProps, delimiter: string) {\n  let stringArr = [ls.axiom, ...ls.productions];\n  return stringArr.reduce((str, t) => str + t + delimiter, \"\")\n}\n\nfunction cleanParam(o: string | string[]): string {\n  if (o instanceof Array) {\n    return o[0] as string\n  }\n  else return o as string\n}\nexport function decodeParams(paramString: string): { initCode?: string, gfxProps?: GFXProps} {\n  const parsedDictionary = qs.parse(paramString, {ignoreQueryPrefix: true});\n  //console.log(\"Parsed from \" + paramString , parsedDictionary)\n  return {initCode: parsedDictionary.code as string, gfxProps: parsedDictionary.gfx}\n} \n\nexport function encodeParams(code?: string, gfxProps?: GFXProps) {\n  const fullProps = { code: code, gfx: gfxProps}\n  const urlString = \"?\" + qs.stringify(fullProps);\n  //console.log(\"Stringifying props into querystring\" + urlString, fullProps);\n  return urlString;\n}\n\n//temp solution\nexport function encodePropsParams(lsProps: LSProps, gfxProps?: GFXProps) {\n  let code = lsProps.axiom + \"\\n\";\n  code = code + lsProps.productions.join(\"\\n\")\n\n  let gfx =  {...gfxProps || {}, iterations: lsProps.iterations};\n  return encodeParams(code, gfx);\n}\n\nexport function encodeCodeParams(code: string, gfxProps?: GFXProps) {\n  return encodeParams(code, gfxProps || {});\n}\n\nexport function createFave(code?: string, gfxProps?: GFXProps) {\n  return {code: code, gfx: gfxProps};\n}\n\nexport function getFave(fave: any) {\n  if (fave && fave.code) {\n    console.log(\"Getting fave\", fave);\n    return {code: fave.code, gfx: fave.gfx}\n  }\n  return undefined;\n}\n\nexport function propsToCode(lsProps: LSProps) : string  {\n  return lsProps.axiom + \"\\n\" + lsProps.productions.join(\"\\n\");\n}\n\nexport function codeToProps(code: string): LSProps {\n  let lines = code.split(\"\\n\")\n  lines = lines.filter(line => !lineIsComment(line));\n  lines = lines.filter(line => line.trim() !== \"\");\n  return {\n    axiom: lines[0],\n    productions: lines.slice(1),\n    iterations: 1\n  }\n}","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/ExamplesPage.tsx",["134","135"],"import { LSPreview } from \"../components/LSPreview\";\nimport PageLayout from \"../components/PageLayout\";\nimport { propsToCode } from \"../components/utils\";\nimport examples from \"../data/examples\";\n\nconst Examples: React.FunctionComponent = ({}) => {\n  return (\n    <PageLayout>\n        <StaticExamples/>\n    </PageLayout>\n  );\n}\nexport default Examples;\n\n//staticExamples.js\n\nconst StaticExamples: React.FunctionComponent = ({}) => {\n \n  function drawExamples() {\n    let examplesDOM: JSX.Element[] = [];\n    examples.forEach((example, index) => {\n      //let lS = new LSystem(example.axiom, example.productions, example.iterations);\n      let preview = (\n        <LSPreview\n          code={propsToCode(example.lsProps)}\n          gfxProps={ {...example.gfxProps, iterations: example.lsProps.iterations}}\n          key={\"eg-\" + example.name}\n          name={example.name}\n        />\n      );\n      examplesDOM.push(preview);\n    });\n    return <div className=\"stack narrow centered large\"> {examplesDOM} </div>;\n  }\n  return drawExamples();\n}\n\n// {\n//   name: \"fern\",\n//   lsProps:{\n//     axiom: \"A(0,1)\",\n//     iterations: 12,\n//     productions: [\"A(d,D){d>0}: A(d-1,D)\", \"A(d,D){d==0}: F(1)[+(45)A(D,D)][-(45)A(D,D)]F(1)A(0,D)\", \"F(a):  F(a*1.48)\"],\n//   },\n//   gfxProps: {length: 2, center: [0,0.4]}\n// },\n\n","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/worker/index.ts",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/worker/worker.ts",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSTextViewer.tsx",["136"],"import { Axiom } from '@bvk/lsystem'\n\nexport default function LSTextViewer(axioms: string[] | undefined) {\n  if (!axioms)  return <div>No axioms exist</div>\n  let textDivs = axioms.map((val, index) => (\n    <li>  { val}  </li>\n  ));\n  return <ol style={{width: \"100%\", height: \"100%\", overflow: \"scroll\"}}> {textDivs} </ol>\n}","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/index.ts",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/Examples/Lilac.tsx",["137"],"import LSystem, { ParamsValue } from \"@bvk/lsystem\"\nimport p5 from \"p5\"\nimport {LSImageViewer3D} from \"../../components/LSViewer\"\nimport { CompleteLSExample, completeGfxProps, GFXProps } from \"../../components/utils\"\n\nconst lilacData: CompleteLSExample = {\n  name: \"lilac\",\n  lsProps: {\n    axiom: \"!(0.9) #(120) [ -(44)  ^(20) F(50) AK ] \",\n    productions: [\n      \"A: P I(0) /(90)  A\",\n      \"I(t) {t!=2}:  F I(t+1)\",\n      \"I(t) {t==2}: ^(rnd(5,15)) #(rnd(60,150)) I(t+1)[-(45)FFA][+(45)FFA][FFA]\",\n      \"P: [-(45)/(45)K][+(45)/(45)K]\",\n      \"K: [F #(100) F [~ M(0.05)]]\",\n      \"M(s) {s<0.1}: M(s+0.05)\",\n      \"M(s) {s>=0.1}: M(0.1)\"\n    ],\n    iterations: 16,\n  },\n  gfxProps: {\n    length: 3,\n    renderType: [\"3d\"],\n    width: 1200,\n    height: 850,\n    angle: 8\n  },\n};\nexport default function Lilac() {\n  let ls =  new LSystem(lilacData.lsProps.axiom, lilacData.lsProps.productions, lilacData.lsProps.iterations);\n  let gfxProps = lilacData.gfxProps; \n\n  return (\n    <div > \n      <DrawLilac axiom={ls.getIterationAsObject()} gfxProps={completeGfxProps(gfxProps)} /> \n      \n    </div>)\n}\n\nconst flowerHue = 325;  \nclass DrawLilac extends LSImageViewer3D {\n  windAngle = 0;\n  animationSpeed = 600;\n  preload = (p: p5) => {\n    p.loadModel(\n      process.env.PUBLIC_URL + \"/assets/lily-flat.obj\",\n      true,\n      (m) => {\n        this.models.push(m);\n        this.startIterationAnimation()\n      },\n      (e) => {\n        console.log(\"Fail to load model\");\n      }\n    );\n  }\n  moveToCenter = () => {\n    //Do nothing, were already there\n    let p = this.p5Context;\n    if (!p) return;\n    p.background(200, 100,100,0.0);\n    \n    let pos = [-180,-150,-320];\n    p.ambientLight(flowerHue - 95, 80, 100);\n    p.pointLight(flowerHue, 80, 90, -500, -500, -900);\n    p.pointLight(flowerHue + 200, 80, 65, 200, 200, -300);\n    \n    p.camera(pos[0], pos[1], pos[2], pos[0], pos[1],0, 0,1,0);\n    \n  }\n  simulateWind = () => {\n    let maxBlows = Math.floor(Math.random() * 100 + 20);\n    for (var i = 0; i < maxBlows; i++) {\n      setTimeout(() => {\n        this.redraw();\n      }, i * 100);\n    }\n  }\n  drawModel = (p:p5, params: ParamsValue | undefined) => {\n    let scaleValue = params && params[0] ? parseFloat(params[0] as string) : 0.1;\n    let model = this.models[0];\n    if (!model) return;\n    p.push();\n\n    p.noStroke();\n    p.fill(100,100,100);   \n    p.specularMaterial(flowerHue,0,100)\n    p.scale(scaleValue);\n    p.model(model);\n    p.pop();\n  }\n  moveCamera = () => {\n    //Do nothing\n  }\n  render() {\n    return (\n      <div style={{backgroundImage: \"linear-gradient(white 30%, rgb(255,220,250))\"}}>\n        <div\n          style={{\n            position: \"fixed\",\n            top: \"12px\",\n            right: \"12px\",\n            width: \"24px\",\n            height: \"24px\",\n            borderRadius: \"100%\",\n            cursor: \"ne-resize\",\n            background: \"rgb(250,120,200)\"\n          }}\n          onClick={() => this.startIterationAnimation()}\n        >\n          {\" \"}\n        </div>\n        <div onClick={(e) => this.simulateWind()} ref={this.containerRef} style={{marginLeft: \"10%\"}}/>\n      </div>\n    );\n  }\n}","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/Examples/TextGarden.tsx",["138","139"],"import LSystem, { ParamsValue } from \"@bvk/lsystem\";\nimport p5 from \"p5\";\nimport LSImageViewer2D from \"../../components/LSViewer/LSImageViewer/LSImageViewer2D\";\nimport { CompleteLSExample, completeGfxProps } from \"../../components/utils\";\n\n\nconst textFlower: CompleteLSExample = {\n  name: \"textFlower\",\n  lsProps: {\n    axiom: \"[S] \",\n    productions: [\n      \"S: A(rnd(5,10))\",\n      \"A(a) {a>=1}: F B(0) B(1) + A(a-1)\",\n      \"B(b) {b==0}: [+(75) F(20) f(10) T(0)]\",\n      \"B(b) {b==1}: [-(75) F(20) f(50) +(180) T(1)]\",\n      \"A(a) {a<1}: FFFF -(120) P(rnd(8,19))\",\n      \"P(p) {p>0}: [F(40) f(10) T(2)] [+(rnd(40,60)) P(p-1)]\",\n      \"P(p) {p==0}: X\"\n    ],\n    iterations: 30,\n  },\n  gfxProps: {\n    length: 40,\n    renderType: [\"2d\"],\n    width: 600,\n    height: 760,\n    angle: 5,\n    center: [0,0.4],\n  },\n};\n\nconst text = [{t:\"you\", s: 16},{t:\"thank\", s:16}, {t:\"☼\", s: 18}]\nconst defaultText = {t: \"\", s: 12};\n\nexport default function textGarden() {\n  let ls = new LSystem(textFlower.lsProps.axiom, textFlower.lsProps.productions, textFlower.lsProps.iterations);\n  let gfxProps = textFlower.gfxProps\n  console.log(ls.getAllIterationsAsString());\n\n  return (<TextTurtle axiom={ls.getIterationAsObject()} gfxProps={completeGfxProps(gfxProps)} />)\n}\nfunction drawText(p: p5, params: ParamsValue | undefined) {\n  let index =  params && params.length == 1 ? parseInt(params[0]  as string) : -1;\n  let textObj = index > -1 ? text[index] : defaultText;\n  p.push();\n  p.noStroke();\n  p.fill(0,0,0);\n  p.textSize(textObj.s);\n  p.text(textObj.t, 0,0);\n  p.pop();\n}\n\nclass TextTurtle extends LSImageViewer2D {\n  xPercent = 1;\n  preload = (p:p5) => { \n    p.textFont(\"helvetica\");\n  }\n  customRules = {\n    \"T\": drawText \n  }\n  mouseMove = (e: React.MouseEvent) => {\n    let mouseX = e.pageX;\n    let mousePercentage = e.pageX / window.innerWidth - 0.5;\n    console.log(mousePercentage);\n    this.xPercent = mousePercentage;\n    this.redraw();\n  }\n  render() {\n    return (\n    <div onMouseMove={this.mouseMove} className=\"full-bleed\" style={{backgroundImage: \"linear-gradient(white 80%, rgba(140,255,100,0.6))\"}} >\n      <div ref={this.containerRef} style={{display: \"inline-block\", marginLeft: \"50%\", transform: \"translate(-50%, 0)\"}}/>\n    </div>)\n  }\n}\n\n","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/Examples/Webpage.tsx",["140","141"],"import LSystem, { ParamsValue } from \"@bvk/lsystem\";\nimport p5 from \"p5\";\nimport LSImageViewer2D from \"../../components/LSViewer/LSImageViewer/LSImageViewer2D\";\nimport { CompleteLSExample, completeGfxProps } from \"../../components/utils\";\n\nlet webData : CompleteLSExample = {\n  lsProps: {\n    axiom: \"A(15)\", \n    productions: [\"A(a):f(a)+B(a)A(a+1)\", \"B(b):[-(90)ffT(b-15)]  [+(90) fff -(90) P(b-20)]\"],\n    iterations: 48\n  },\n  gfxProps: {\n    angle: 5,\n    length: 5,\n    width: 2000,\n    height: 800,\n    center: [-0.18,0.2]\n  }\n}\n\nexport default function WebPage() {\n  let ls = new LSystem(webData.lsProps.axiom, webData.lsProps.productions, webData.lsProps.iterations);\n  let gfxProps = webData.gfxProps;\n  return <WebTurtle axiom={ls.getIterationAsObject()} gfxProps={completeGfxProps(gfxProps)}  />\n}\n\n\nconst text = [\"Alt social \",\n\"Starry night - rhizome \",\n\"Run your own social \",\n\"Special fish\",\n\"Petals network\",\n\"cyberspace and as space\",\n\"Mastodon\",\n\"Feminist community networks \",\n\"Echo\",\n\"This is Fine: Optimism & Emergency in the P2P Network\",\n\"Distributed Web of Care\",\n\"PeerToPeerWeb / Dat\",\n\"Consentful Tech\",\n\"Rediscovering the small web\",\n\"Zonelets: \",\n\"Cozy web/extended internet universe\",\n\"Small web / site.js\",\n\"NYC mesh \",\n\"History of communication \",\n\"Black gooey universe \",\n\"Hand made web \",\n\"Hundred rabbits\",\n\"Dark Study \",\n\"Tiny tools list (everest pipkin)\",\n\"Wonderful world of weird creative tools \",\n\"Glyph Drawing Club\",\n\"Programs | Emergent Works\",\n\"Casual creation tools - a paper \",\n\"SQLLite story\",\n\"Jeffrey Alan schuder\",\n\"Picrew: Create avatars\",\n\"coming age of calm tech - xerox parc\",\n\"The rise of the ambient video game\",\n\"Using the internet mindfully\",\n\"Soft.works\",\n\"hardlyeverything.co\",\n\"How to grow an idea\",]\n\nconst defaultText = \"\";\n\n\nfunction drawText(p: p5, params: ParamsValue | undefined) {\n  let index =  params && params.length == 1 ? parseInt(params[0]  as string) : -1;\n  let textObj = index > -1 ? text[index] : defaultText;\n  p.push();\n  p.noStroke();\n  p.fill(230,100,100);\n  p.textSize(12);\n  p.textStyle()\n  p.text(textObj, 0,0);\n  p.pop();\n}\n\nconst t2 = [\"m\",\n\"y\",\n\" \",\n\"f\",\n\"a\",\n\"v\",\n\"o\",\n\"r\",\n\"i\",\n\"t\",\n\"e\",\n\" \",\n\"r\",\n\"e\",\n\"f\",\n\"e\",\n\"r\",\n\"e\",\n\"n\",\n\"c\",\n\"e\",\n\"s\", ]\n\nfunction drawText2(p: p5, params: ParamsValue | undefined) {\n  let index =  params && params.length == 1 ? parseInt(params[0]  as string) : -1;\n  let textObj = index > -1 && index < t2.length ? t2[index] : defaultText;\n  p.push();\n  p.noStroke();\n  p.fill(0,0,0);\n  p.textSize(14);\n  p.textStyle()\n  p.text(textObj, 0,0);\n  p.pop();\n}\n\nclass WebTurtle extends LSImageViewer2D {\n\n  animationSpeed = 1000;\n  preload = (p:p5) => { \n    //p.textFont(\"consolas\");\n  }\n  customRules = {\n    \"T\": drawText,\n    \"P\": drawText2\n  }\n\n  render() {\n    return (\n    <div className=\"full-bleed\"  >\n      <div ref={this.containerRef} style={{display: \"inline-block\", marginLeft: \"50%\", transform: \"translate(-50%, 0)\"}}/>\n    </div>)\n  }\n}\n\n","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/index.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/LSImageViewer3D.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/LSImageViewer2D.tsx",["142"],"import p5, { PrintWriter } from \"p5\"\nimport LSImageViewerBasic from \"./LSImageViewerBasic\";\nimport { draw2DChar } from \"./drawChar\";\n\nexport default class LSImageViewer2D extends LSImageViewerBasic {\n  drawCharFunct = draw2DChar;\n \n  drawCurrentAxiom = (p : p5) => {\n    if (this.props.axiom !== undefined) {\n      let cS = this.props.axiom\n      \n      p.background(100,0,100);\n      p.noFill();\n      p.stroke(0, 0, 0);\n      p.strokeWeight(this.props.gfxProps.strokeWeight);\n      let steps = cS.length;\n      p.push();\n      for (let i = 0; i < steps; i++) {\n        let letter = cS[i];\n        let char = letter.symbol;\n        let params = letter.params;\n        let param = letter.params && letter.params.length === 1 ? letter.params[0] + \"\" : undefined;\n        let val = param && !isNaN(parseFloat(param)) ? parseFloat(param) : undefined\n        this.drawCharFunct(p, char, val || this.props.gfxProps.length, val || this.props.gfxProps.angle, params);\n      }\n      p.pop();\n      p.noLoop();\n    }\n  }\n\n\n}\n\n\n","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/drawChar.ts",["143"],"import p5 from \"p5\";\nimport { ParamsValue } from \"@bvk/lsystem\";\n\nexport const draw2DChar = (p : p5, char: string, l: number, a: number, params: ParamsValue | undefined) => {\n  if (!p) return;\n  switch (char) {\n    case \"F\":\n      p.line(0, 0, l, 0);\n      p.translate(l, 0);\n      break;\n    case \"f\":\n      p.translate(l, 0);\n      break;\n    case \"+\":\n      p.rotate(a);\n      break;\n    case \"-\":\n      p.rotate(-a);\n      break;\n    case \"[\":\n      p.push()\n      break;\n    case \"]\":\n      p.pop();\n      break;\n    case \"E\":\n      p.ellipse(0, 0, l, l);\n      break;\n    case \"!\":\n      p.strokeWeight(l)\n      break;\n    case \"~\":\n      p.rotate(Math.random() * a);\n      break;\n    case \"#\":\n      if (!l || l == 0) p.stroke(0, 0, 0);\n      else {\n        let h = params && params[0] ? parseFloat(params[0] as string) : 0;\n        let s = params && params[1] ? parseFloat(params[1] as string) : 100;\n        let b = params && params[2] ? parseFloat(params[2] as string) : 100;\n        p.stroke(h, s, b);\n      }\n      break;\n    default:\n      //console.log(char + \" isn't turtle command\");\n      break;\n  }\n}\n\nexport const draw3DChar = (p: p5, char: string, l: number, a: number, params: ParamsValue | undefined) => {\n  if (!p) return\n  switch (char) {\n    case \"F\":\n      p.line(0, 0, 0, l);\n      p.translate(0, l);\n      break;\n    case \"f\":\n      p.translate(0, l);\n      break;\n    case \"[\":\n      p.push();\n      break;\n    case \"]\":\n      p.pop();\n      break;\n    //Here: Yaw is around Z axis, giving you +/- on the YX plane \n    //What that means, is a 2d curve will be drawn on the YX plane  \n    case \"+\":\n      p.rotateZ(a);\n      break;\n    case \"-\":\n      p.rotateZ(-a);\n      break;\n    //PITCH is around X axis, giving you &/^ (pitch down/up) \n    //So pitching up down gives you rotation \"up/down\" w.r.t to up axis \n    case \"&\":\n      p.rotateX(a);\n      break;\n    case \"^\":\n      p.rotateX(-a)\n      break;\n    //ROLL is around Y axis, gives you a roll around itself\n    //Without any PITCH, Roll is meaningless for a line (just rolls around itself)\n    case '\\'':\n      p.rotateY(a);\n      break;\n    case '/':\n      p.rotateY(-a);\n      break;\n    case \"E\":\n      if (params && params[1]) {\n        p.fill(parseFloat(params[1] as string), 100,100 );\n      }\n      p.ellipse(0, 0, l, l);\n      p.noFill();\n      break;\n    case \"!\":\n      p.strokeWeight(l)\n      break;\n    case \"~\":\n      p.rotateX(Math.random() * a);\n      p.rotateY(Math.random() * a);\n      p.rotateZ(Math.random() * a);\n      break;\n    case \"#\":\n      p.stroke(l, 100, 100);\n      break;\n    case \"M\":\n      draw3DModel(p, params)\n      break;\n    default:\n      //console.log(char + \" isn't turtle command\");\n      break;\n    }\n  }\n\nconst draw3DModel = (p:p5, params: ParamsValue | undefined) => {\n  let scaleValue = params && params[0] ? parseFloat(params[0] as string) : 0.1;\n  p.push();\n  //p.specularMaterial(255);\n  p.scale(scaleValue);\n  p.box(100);\n  p.pop();\n}","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSImageViewer/LSImageViewerBasic.tsx",["144"],"import React from \"react\"\nimport {  GFXPropsComplete, P5CanvasType } from \"../../utils\";\nimport {Axiom} from \"@bvk/lsystem\"\nimport p5 from \"p5\";\nimport ReactScrollWheelHandler from \"react-scroll-wheel-handler\";\n\n//Props should control all the things coming into the viewer\nexport interface LSImageViewerBasicProps {\n  axiom: Axiom | undefined,\n  gfxProps: GFXPropsComplete\n}\n\n//State should control anything needed for the panning + zooming \nexport interface LSImageViewerBasicState {\n  localScale: number,\n  localCenter: number[] \n}\n\n\nexport default class LSImageViewerBasic< S extends LSImageViewerBasicState = LSImageViewerBasicState> extends React.Component<LSImageViewerBasicProps,S> {\n\n  p5Context: p5 | undefined\n  containerRef = React.createRef<HTMLDivElement>();\n  canvasType : P5CanvasType = \"p2d\"\n  canvasID : string = \"P5-BASIC-CANVAS\" \n\n  constructor(props: LSImageViewerBasicProps) {\n    super(props);\n    //TODO: When to bind\n    this.state = {\n      localScale: props.gfxProps.width / 600,\n      localCenter: props.gfxProps.center\n    } as S\n  }\n  componentDidMount() {\n    if (this.containerRef.current) \n      new p5(this.sketch, this.containerRef.current);\n  }\n  componentDidUpdate(prevProps: LSImageViewerBasicProps) {\n    if (this.props.gfxProps.center !== prevProps.gfxProps.center) {\n      this.setState({localCenter: this.props.gfxProps.center})\n    }\n    if (this.props.gfxProps.width !== prevProps.gfxProps.width || this.props.gfxProps.height !== prevProps.gfxProps.height ) {\n      if (this.p5Context) {\n        console.log(\"🦋🦋🦋🦋🦋🦋🦋🦋 RESIZING CANVAS\", this.props.gfxProps)\n        this.p5Context.resizeCanvas(this.props.gfxProps.width, this.props.gfxProps.height);\n        this.setState({ localScale: this.props.gfxProps.width / 600})\n      }\n    }\n    this.redraw();\n  }\n\n  defaultSetup = (p: p5) => {\n    console.log(\"🦋🦋🦋🦋🦋🦋🦋🦋 creating canvas\", this.props.gfxProps);\n    let cnv = p.createCanvas(this.props.gfxProps.width, this.props.gfxProps.height, this.canvasType);\n    cnv.id(this.canvasID);\n    p.angleMode(p.DEGREES);\n    p.colorMode(p.HSB);\n    p.noLoop();\n    p.textFont(\"monospace \", 12);\n    p.strokeCap(\"butt\")\n  \n  }\n  preload = (p: p5) => {\n    //Do nothing in the base case\n  }\n  redraw = () => {\n    console.log(\"Redrawing graphic\");\n    if (this.p5Context !== undefined) {\n      this.p5Context.clear();\n      this.p5Context.background(this.props.gfxProps.backgroundColor);\n      this.drawCurrentGraphic(this.p5Context);\n      this.p5Context?.noLoop();\n    } else {\n      console.log(\"Couldnt redraw\");\n      console.log(this.p5Context);\n    }\n  }\n  moveToCanvasCenter = (p: p5) => {\n    if (!p) return\n    p.translate(p.width / 2, p.height / 2);\n  }\n  scaleToZoomLevel = (p: p5) => {\n    if (!p) return;\n    p.scale(this.state.localScale);\n  }\n  rotateToUp = (p : p5) => {\n    if (p) p.rotate(-90);\n  }\n  drawCurrentGraphic = (p:p5) => {\n    p.push();\n    this.moveToCanvasCenter(p);\n    this.scaleToZoomLevel(p);\n    p.translate(this.state.localCenter[0] * p.width, this.state.localCenter[1] * p.height);\n    this.rotateToUp(p);\n    this.drawCurrentAxiom(p);\n    p.pop();\n  }\n  drawCurrentAxiom = (p: p5) => {\n    p.fill(Math.random() * 100 , 100 , 100);\n    p.ellipse(0,0,100,100);\n  }\n  startIterationAnimation = () => {\n    //TODO\n  }\n  sketch = (p: p5) => {\n \n    p.setup = () => {\n      console.log(\"💖💖💖💖 RUNNING SETUP NOW FOR P5\")\n      this.defaultSetup(p);\n      this.preload(p);\n      this.p5Context = p;\n      this.redraw();\n    };\n    p.draw = () => {\n\n    }\n  };\n  handleZoom = (zoomAmount: number) => {\n    if (zoomAmount && zoomAmount !== 0) {\n      let scale = this.state.localScale;\n      scale = scale + zoomAmount * scale;\n      console.log(\"Setting new scale\" + scale);\n      this.setState({localScale: scale})\n    }\n  }\n  handlePan = (panX: number, panY: number) => {\n    let center = this.state.localCenter;\n    center = [center[0] + panX, center[1] + panY];\n    this.setState({localCenter: center})\n  }\n  getZoomControls = () => {\n    return (\n      <div key=\"zoom-controls\">\n        <div className=\"clickable\" onClick={(e) => this.handleZoom(+0.1)}>\n          +\n        </div>\n        <div className=\"clickable\" onClick={(e) => this.handleZoom(-0.1)}>\n          -\n        </div>\n      </div>);\n  }\n  getPanControls = () => {\n    return ( <div key=\"pan-controls\">\n      <div className=\"clickable\" onClick={(e) => this.handlePan(0, -0.01)}>\n        up\n      </div>\n      <div className=\"clickable\" onClick={(e) => this.handlePan(0, 0.01)}>\n        dw\n      </div>\n      <div className=\"clickable\" onClick={(e) => this.handlePan(0.01, 0)}>\n        lf\n      </div>\n      <div className=\"clickable\" onClick={(e) => this.handlePan(-0.01, 0)}>\n        rt\n      </div>\n    </div>)\n  }\n  getCanvasControls = (): JSX.Element[] => {\n    return [ this.getZoomControls(), this.getPanControls()];\n  }\n  render() {\n    return (\n      <div style={{ position: \"relative\" }}>\n        <div style={{ position: \"absolute\", right: 0, top: 0, zIndex: 2 }} className=\"padded\" >\n          {this.getCanvasControls()}\n        </div>\n        <div ref={this.containerRef} />\n      </div>\n    );\n  }\n}","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditAndView.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSEditor.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSStatusConsole.tsx",["145","146"],"import { LSStatus } from \"../utils\";\nimport React, {useState, useEffect, useCallback, useRef} from \"react\"\n\ninterface LSConsoleProps {\n  status?: LSStatus,\n  className?: string\n}\n\ninterface StatusLog {\n  timecode: string,\n  status: LSStatus\n}\n\nconst getNow = (): string => {\n  return new Date().toLocaleTimeString(undefined, {\n    hour12: true,\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit'\n  })\n}\n\n\nconst LSConsole : React.FunctionComponent<LSConsoleProps> = ( {status, className}) => {\n  \n  const [ statusLog, setStatusLog] = useState<StatusLog[]>([]);\n  //const [ currentStatus, setCurrentStatus] = useState<JSX.Element>( statusToEl(status));\n\n  useEffect(() => {\n    if (status) {\n      //const statusEl = statusToEl(status);\n      //setCurrentStatus(statusEl);\n\n      if (status.state === \"compiling\") {\n        setStatusLog([{timecode: getNow(), status}])\n      } else {\n        setStatusLog((prev) => [...prev, { timecode: getNow(), status }]);\n      }\n      \n    }\n  }, [status])\n\n  return <div className={className}> {statusLog.map((logStatus) => statusToEl(logStatus.status, logStatus.timecode, statusLog[statusLog.length - 1]) )} </div>\n}\n\nconst statusToEl = (status: LSStatus | undefined, timecode: string, currentStatus: StatusLog) : JSX.Element => {\n  let stringEl;\n  \n  if (!status) {\n    stringEl = <div> No status available </div>\n  } else {\n  switch (status.state) {\n    case \"error\":\n      stringEl = (\n        <div>\n          <span className=\"red\"> Whoops, we have an error!</span>\n          <ul>\n            {status.errors &&\n              status.errors.map((err, i) => (\n                <li key={`error-${i}`} >\n                  <span>{err.lineNum === \"global\" ? \"\" : \"Error parsing line: \" + err.lineNum}</span>\n                  <span>{err.error.message}</span>\n                </li>\n              ))}\n          </ul>\n        </div>\n      ); \n      break;\n    case \"compiling\":\n      stringEl = <div> Generating L-System {currentStatus.status.state === \"compiling\" ? <ScrollingDots/> : \"\"} </div>\n      break;\n    case \"compiled\":\n      stringEl = <div> L-System generated {status.message} </div>\n      break;\n    case \"ready\":\n      stringEl = <div> Ready to compile </div>\n      break;\n    case \"redrawing\":\n      stringEl = <div> No changes to L-System, just redrawing </div>\n      break;\n    default:\n      stringEl = <div> idk lol </div>\n      break;\n  }}\n  let timecodeEl = timecode ? <span className=\"grey\"> {timecode} </span> : \"\";\n  return <div className=\"horizontal-stack\" > {timecodeEl} {stringEl} </div>\n}\n\nconst ScrollingDots : React.FunctionComponent = ({}) => {\n  const [numDots, setNumDots] = useState<number>(3);\n\n  const incrementDots = useCallback(() => {\n    setNumDots((n) => n > 3 ? 0 : n + 1);\n  }, [setNumDots])\n    \n  useEffect(() => {\n    const interval  = setInterval(incrementDots, 500);\n    return () => {clearInterval(interval)}\n  }, [incrementDots])\n\n  const getDots = useCallback(() => {\n    let str = \"\";\n    for (var i=0; i <numDots; i++){\n      str += \".\"\n    };\n    return str;\n  }, [numDots]) \n\n  return (<span> {getDots()}</span>)\n}\n\n\nexport default LSConsole;","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSCodeEditor.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/LSGFXEditor.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/pages/FavoritePage.tsx",["147","148"],"import { LSPreview } from \"../components/LSPreview\";\nimport PageLayout from \"../components/PageLayout\";\nimport { codeToProps, getFave } from \"../components/utils\";\n\nconst FavoritePage: React.FunctionComponent = ({}) => {\n\n  const favorites = localStorage.getItem(\"favorites\");\n  if (! favorites || favorites === \"\") {\n    return <PageLayout><div> No favorites yet </div></PageLayout>\n  }\n\n  const faveList = JSON.parse(favorites);\n  let links = Object.keys(faveList).map( (key) => {\n    const fave = getFave(faveList[key]);\n    if (fave) {\n      return <div> <LSPreview code={fave.code} gfxProps={fave.gfx} /></div>\n    } else {\n      return <div> <li> Fave corrupted, sorry </li></div>\n    }\n  })\n  return (<PageLayout><div className=\"grid padded\"> {links} </div> </PageLayout>)\n}\n\nexport default FavoritePage;","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSEditor/codeSyntax.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/PageLayout.tsx",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/data/examples.ts",[],"/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/LSViewer/LSViewerController.tsx",["149","150","151","152","153","154"],"import React, { useCallback, useRef, useState } from \"react\";\nimport LSystem, { Axiom } from \"@bvk/lsystem\";\nimport { completeGfxProps, GFXProps, renderTypes } from \"../utils\";\nimport LSImageViewer2D from \"./LSImageViewer/LSImageViewer2D\";\nimport LSImageViewer3D from \"./LSImageViewer/LSImageViewer3D\";\nimport { useEffect } from \"react\";\nimport { LSTextViewer } from \".\";\nimport ReactDropdown from \"react-dropdown\";\nimport RangeSlider from \"../ui/RangeSlider\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\nimport useMeasure from \"react-use-measure\";\n\ninterface LSViewerControllerProps {\n  lSystem: LSystem;\n  gfxProps?: GFXProps;\n  autoResize?: boolean;\n  changeViewerControls?: boolean;\n  changeIterationsControls?: boolean;\n}\n\nconst viewerTypeDropdownOptions: { value: renderTypes; label: string }[] = [\n  { value: \"auto\", label: \"Image: Auto\" },\n  { value: \"2d\", label: \"Image: 2D\" },\n  { value: \"3d\", label: \"Image: 3D\" },\n  { value: \"text\", label: \"Text\" },\n];\n\n/**\n * Component to manage viewing an LSystem as an image.\n * NOTE: IF the Lsystem has not been \"iterated\", this component will iterate it on the main thread. It is recommended to iterate before initializing component\n * @param props\n * @returns\n */\nconst LSViewerController: React.FunctionComponent<LSViewerControllerProps> = (props) => {\n  //State to  update renderers\n  const [viewerType, setViewerType] = useState<renderTypes>(extractViewerTypeFromProps(props.gfxProps));\n  const [currentAxiom, setCurrentAxiom] = useState<Axiom>();\n  const [allCurrentAxioms, setAllCurrentAxioms] = useState<Axiom[]>();\n  const [currentIteration, setCurrentIteration] = useState<number>(props.lSystem.iterations);\n  const [currentGFXProps, setCurrentGFXProps] = useState<GFXProps>(props.gfxProps || {});\n  useHotkeys(\"ctrl+/, command+/\", () => { currentlyAnimating.current ? stopIterationAnimation() : startIterationAnimation(); return false});\n\n  //State to update animations\n  const currentlyAnimating = useRef<boolean>(false);\n  const activeInterval = useRef<NodeJS.Timeout>();\n  const [measureRef, bounds] = useMeasure()\n\n  //Trigger re-render if the gxfProps, current axiom, or viewer type change\n  const getCurrentContainerSize = useCallback(() => {\n    if (viewerContainerEl.current && props.autoResize) {\n      \n      return {bounds, height}\n    } else {\n      return {}\n    }\n  }, [props.autoResize])\n  const getViewer = useCallback(() => {\n    if (currentAxiom) {\n      console.log(\"↗️↗️↗️↗️ RETURNING A NEW VIEWER!\", currentGFXProps)\n      const viewerProps = { gfxProps: completeGfxProps({...currentGFXProps, ...getCurrentContainerSize()}), axiom: currentAxiom };\n      switch (viewerType) {\n        case \"2d\":\n          return <LSImageViewer2D {...viewerProps} key=\"controller-viewer-2d\" />;\n        case \"3d\":\n          return <LSImageViewer3D {...viewerProps} key=\"controller-viewer-3d\" />;\n        case \"text\":\n          const axiomsAsText = props.lSystem.getAllIterationsAsString();\n          return LSTextViewer(axiomsAsText);\n        case \"auto\":\n          const autoViewerType = getAutoViewerType(props.lSystem);\n          if (autoViewerType === \"3d\") {\n            return <LSImageViewer3D {...viewerProps} key=\"controller-viewer-3d\" />;\n          } else {\n            return <LSImageViewer2D {...viewerProps} key=\"controller-viewer-2d\" />;\n          }\n      }\n    }\n  }, [currentAxiom, currentGFXProps, getCurrentContainerSize, viewerType, props.lSystem]);\n\n  //Keep canvas size in sync with its container\n  useEffect(() => {\n    window.addEventListener(\"resize\", resizeGFXProps);\n    setCurrentGFXProps({...currentGFXProps, ...getCurrentContainerSize()})\n    return () => {\n      window.removeEventListener(\"resize\", resizeGFXProps);\n    };\n  }, [props.autoResize]);\n  const resizeGFXProps = () => { \n      const newGfxProps: GFXProps = { ...currentGFXProps,  ...getCurrentContainerSize() };\n      console.log(\"GFX Props updated\", newGfxProps);\n      setCurrentGFXProps(newGfxProps);\n  };\n\n\n  //When the lsystem changes, cancel any anim timers and set current iterations + all current axioms\n  useEffect(() => {\n    if (activeInterval.current) clearTimeout(activeInterval.current);\n    setCurrentIteration(props.lSystem.iterations);\n    setAllCurrentAxioms(props.lSystem.getAllIterationsAsObject());\n  }, [props.lSystem, props.lSystem.iterations]);\n\n  //When the currentIteration or all current Axioms change, change current axiom (trigger-re-render)\n  useEffect(() => {\n    if (allCurrentAxioms) setCurrentAxiom(allCurrentAxioms[currentIteration]);\n  }, [currentIteration, allCurrentAxioms]);\n\n  //If ls or gfx props change, viewer type may change\n  useEffect(() => {\n    if (props.gfxProps) {\n      const newViewerType = extractViewerTypeFromProps(props.gfxProps);\n      setViewerType(newViewerType);\n      setCurrentGFXProps(props.gfxProps);\n    }\n  }, [props.gfxProps]);\n\n  //Helper functions for animations\n  const stopIterationAnimation = () => {\n    console.log(\"Anim stop\", currentIteration);\n    currentlyAnimating.current = false;\n  };\n  const startIterationAnimation = () => {\n    console.log(\"Anim start\");\n    currentlyAnimating.current = true;\n    setCurrentIteration(0);\n  };\n  //Animation is just powered by changes to currentIteration.\n  //The currentIteration changes itself every x seconds.\n  //STOP IF:  the LS changes the iters set to the stopping point OR forced stop\n  useEffect(() => {\n    if (currentIteration === props.lSystem.iterations || currentlyAnimating.current === false) {\n      stopIterationAnimation();\n    } else {\n      activeInterval.current = setTimeout(\n        () => setCurrentIteration(currentIteration + 1),\n        props.gfxProps?.animationWaitTime || completeGfxProps(undefined).animationWaitTime\n      );\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currentIteration]);\n\n\n\n  return (\n    <div className=\"stack no-gap\" style={{ position: \"relative\", alignItems: \"stretch\" }}>\n      <div className=\"toolbar horizontal-stack small edit-surface border-bottom visible-overflow\">\n        <div>\n          <ReactDropdown\n            options={viewerTypeDropdownOptions}\n            value={viewerType}\n            disabled={!props.changeViewerControls}\n            onChange={(opt) => setViewerType(opt.value as renderTypes)}\n            arrowClosed={props.changeViewerControls && <span>▾</span>}\n            arrowOpen={props.changeViewerControls && <span>▾</span>}\n            controlClassName={\"horizontal-stack smaller clickable\"}\n            menuClassName={\"border floating padded edit-surface-light-tone clickable stack\"}\n          />\n        </div>\n        <div className=\"horizontal-stack padded:right \">\n          Iteration\n          <span style={{ width: \"2.2ch\", textAlign: \"right\", display: \"inline-block\" }}> {currentIteration} </span>\n          <div style={{ width: \"10ch\" }}>\n            <RangeSlider\n              min={0}\n              max={props.lSystem.iterations}\n              onChange={(n: number) => {\n                stopIterationAnimation();\n                setCurrentIteration(n);\n              }}\n              currentValue={currentIteration}\n            />\n          </div>\n        </div>\n        <div\n          onClick={() => (currentlyAnimating.current ? stopIterationAnimation() : startIterationAnimation())}\n          className=\"clickable minwidth\"\n        >\n          {currentlyAnimating.current ? \"stop\" : \"animate\"}{\" \"}\n          <div className=\"gray subtext padded:left:smallest\">(⌘+/)</div>\n        </div>\n      </div>\n      <div ref={measureRef} className={\"hide-overflow full-size\"}>\n        {getViewer()}\n      </div>\n    </div>\n  );\n};\n\nexport default LSViewerController;\n\n// Helper functions to automatically choose character\nfunction charIs3D(l: string) {\n  let is3D = l == \"&\" || l == \"^\" || l == \"/\" || l == \"\\\\\";\n  return is3D;\n}\nfunction extractViewerTypeFromProps(gfxProps?: GFXProps): renderTypes {\n  if (gfxProps && gfxProps.renderType && !gfxProps.renderType.includes(\"auto\")) {\n    if (gfxProps.renderType.includes(\"text\")) return \"text\";\n    if (gfxProps.renderType.includes(\"2d\")) return \"2d\";\n    if (gfxProps.renderType.includes(\"3d\")) return \"3d\";\n  }\n  return \"auto\";\n}\n\nfunction getAutoViewerType(lSystem: LSystem): renderTypes {\n  for (let i = 0; i < lSystem.axiom.length; i++) {\n    if (charIs3D(lSystem.axiom[i].symbol)) {\n      return \"3d\";\n    }\n  }\n  for (let i = 0; i < lSystem.productions.length; i++) {\n    let p = lSystem.productions[i];\n    let successors = Array.isArray(p.successor) ? p.successor : [p.successor];\n    for (let j = 0; j < successors.length; j++) {\n      let s = successors[j];\n      for (let k = 0; k < s.letters.length; k++) {\n        if (charIs3D(s.letters[k].symbol)) {\n          return \"3d\";\n        }\n      }\n    }\n  }\n  return \"2d\";\n}\n","/Users/bhavik/Documents/Active/tend/lsystem-examples/src/components/ui/RangeSlider.tsx",[],{"ruleId":"155","replacedBy":"156"},{"ruleId":"157","replacedBy":"158"},{"ruleId":"159","severity":1,"message":"160","line":4,"column":42,"nodeType":"161","messageId":"162","endLine":4,"endColumn":59},{"ruleId":"159","severity":1,"message":"163","line":4,"column":80,"nodeType":"161","messageId":"162","endLine":4,"endColumn":91},{"ruleId":"159","severity":1,"message":"164","line":3,"column":25,"nodeType":"161","messageId":"162","endLine":3,"endColumn":35},{"ruleId":"159","severity":1,"message":"165","line":76,"column":10,"nodeType":"161","messageId":"162","endLine":76,"endColumn":20},{"ruleId":"166","severity":1,"message":"167","line":6,"column":44,"nodeType":"168","messageId":"169","endLine":6,"endColumn":46},{"ruleId":"166","severity":1,"message":"167","line":17,"column":50,"nodeType":"168","messageId":"169","endLine":17,"endColumn":52},{"ruleId":"159","severity":1,"message":"170","line":1,"column":10,"nodeType":"161","messageId":"162","endLine":1,"endColumn":15},{"ruleId":"159","severity":1,"message":"171","line":4,"column":47,"nodeType":"161","messageId":"162","endLine":4,"endColumn":55},{"ruleId":"172","severity":1,"message":"173","line":43,"column":40,"nodeType":"174","messageId":"169","endLine":43,"endColumn":42},{"ruleId":"159","severity":1,"message":"175","line":62,"column":9,"nodeType":"161","messageId":"162","endLine":62,"endColumn":15},{"ruleId":"172","severity":1,"message":"173","line":70,"column":40,"nodeType":"174","messageId":"169","endLine":70,"endColumn":42},{"ruleId":"172","severity":1,"message":"173","line":105,"column":40,"nodeType":"174","messageId":"169","endLine":105,"endColumn":42},{"ruleId":"159","severity":1,"message":"176","line":1,"column":14,"nodeType":"161","messageId":"162","endLine":1,"endColumn":25},{"ruleId":"172","severity":1,"message":"173","line":36,"column":19,"nodeType":"174","messageId":"169","endLine":36,"endColumn":21},{"ruleId":"159","severity":1,"message":"177","line":5,"column":8,"nodeType":"161","messageId":"162","endLine":5,"endColumn":31},{"ruleId":"159","severity":1,"message":"178","line":2,"column":50,"nodeType":"161","messageId":"162","endLine":2,"endColumn":56},{"ruleId":"166","severity":1,"message":"167","line":89,"column":50,"nodeType":"168","messageId":"169","endLine":89,"endColumn":52},{"ruleId":"159","severity":1,"message":"179","line":3,"column":10,"nodeType":"161","messageId":"162","endLine":3,"endColumn":21},{"ruleId":"166","severity":1,"message":"167","line":5,"column":48,"nodeType":"168","messageId":"169","endLine":5,"endColumn":50},{"ruleId":"180","severity":1,"message":"181","line":56,"column":6,"nodeType":"182","endLine":56,"endColumn":24,"suggestions":"183"},{"ruleId":"180","severity":1,"message":"184","line":87,"column":6,"nodeType":"182","endLine":87,"endColumn":24,"suggestions":"185"},{"ruleId":"172","severity":1,"message":"173","line":192,"column":16,"nodeType":"174","messageId":"169","endLine":192,"endColumn":18},{"ruleId":"172","severity":1,"message":"173","line":192,"column":28,"nodeType":"174","messageId":"169","endLine":192,"endColumn":30},{"ruleId":"172","severity":1,"message":"173","line":192,"column":40,"nodeType":"174","messageId":"169","endLine":192,"endColumn":42},{"ruleId":"172","severity":1,"message":"173","line":192,"column":52,"nodeType":"174","messageId":"169","endLine":192,"endColumn":54},"no-native-reassign",["186"],"no-negated-in-lhs",["187"],"@typescript-eslint/no-unused-vars","'encodePropsParams' is defined but never used.","Identifier","unusedVar","'propsToCode' is defined but never used.","'splitLines' is defined but never used.","'cleanParam' is defined but never used.","no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","'Axiom' is defined but never used.","'GFXProps' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","'mouseX' is assigned a value but never used.","'PrintWriter' is defined but never used.","'ReactScrollWheelHandler' is defined but never used.","'useRef' is defined but never used.","'codeToProps' is defined but never used.","react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'bounds'. Either include it or remove the dependency array.","ArrayExpression",["188"],"React Hook useEffect has missing dependencies: 'currentGFXProps', 'getCurrentContainerSize', and 'resizeGFXProps'. Either include them or remove the dependency array. You can also do a functional update 'setCurrentGFXProps(c => ...)' if you only need 'currentGFXProps' in the 'setCurrentGFXProps' call.",["189"],"no-global-assign","no-unsafe-negation",{"desc":"190","fix":"191"},{"desc":"192","fix":"193"},"Update the dependencies array to be: [bounds, props.autoResize]",{"range":"194","text":"195"},"Update the dependencies array to be: [currentGFXProps, getCurrentContainerSize, props.autoResize, resizeGFXProps]",{"range":"196","text":"197"},[2349,2367],"[bounds, props.autoResize]",[3727,3745],"[currentGFXProps, getCurrentContainerSize, props.autoResize, resizeGFXProps]"]